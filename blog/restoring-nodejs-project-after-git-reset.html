<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>wavesurfer.js – blog</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/style.css">

    <!-- wavesurfer.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.0.52/wavesurfer.min.js"></script>
  </head>
  <body>
    <header>
      <h1><a href="/">wavesurfer.js</a></h1>
    </header>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2">
          <ul>
            <li>
              <a href="/">Overview</a>
            </li>

            <li>
              <a href="/docs">API docs</a>
            </li>

            <li>
              <a href="/examples">Examples</a>
            </li>

            <li>
              <a href="/faq">FAQ</a>
            </li>

            <li>
              <a href="/plugins">Plugins</a>
            </li>

            <li>
              <a href="/projects">Projects</a>
            </li>

            <li>
              <a href="/blog">Blog</a>

              <ul>
                <li>
                  <a href="/blog/netflix-subs.html">
                    17 Feb 2016
                  </a>
                </li>
                <li>
                  <a href="/blog/emacs-beginning-of-function.html">
                    09 May 2015
                  </a>
                </li>
                <li>
                  <a href="/blog/js-in-webstorm-vs-emacs.html">
                    01 May 2015
                  </a>
                </li>
                <li>
                  <a href="/blog/javascript-static-analysers.html">
                    07 Mar 2015
                  </a>
                </li>
                <li class="active">
                  <a href="/blog/restoring-nodejs-project-after-git-reset.html">
                    14 Apr 2014
                  </a>
                </li>
                <li>
                  <a href="/blog/ido-at-point.html">
                    06 Mar 2014
                  </a>
                </li>
                <li>
                  <a href="/blog/emacs-javascript.html">
                    12 Jun 2013
                  </a>
                </li>
              </ul>
            </li>
          </ul>

          <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=wavesurfer-jsorg" id="_carbonads_js"></script>

          <ul class="secondary-menu">
            <li>
              <a href="/about">About</a>
            </li>

            <li>
              <a href="/contact-us">Contact us</a>
            </li>

            <li>
              <a href="/privacy-policy">Privacy policy</a>
            </li>
          </ul>
        </div>

        <div class="col-sm-9 col-md-10">
          <section>
<div id="post">
    <h1 id="restoring-a-nodejs-project-after-a-git-reset">Restoring a Node.js Project after a git-reset</h1>

<p>Yesterday I did a&nbsp;very stupid thing. Ran <code>git init</code>, <code>git add .</code> and&nbsp;<code>git reset --hard</code> in&nbsp;succession, in&nbsp;a&nbsp;new Node.js project
directory. Every modification that I had done before initializing the&nbsp;git repository was gone.</p>

<p>Fortuntately, I was able to&nbsp;restore the&nbsp;files from&nbsp;a&nbsp;Node.js process
that had been still running my app. Here’s how I did it.</p>

<h2 id="node-inspector">Node Inspector</h2>
<p>Node.js is known to&nbsp;provide a&nbsp;debugging interface. One cool thing people did with&nbsp;this interface is build a&nbsp;Chrome DevTools front-end for&nbsp;it. It’s called <a href="https://github.com/node-inspector/node-inspector">Node Inspector</a>. You can view the&nbsp;in-memory resources, set breakpoints, execute expressions step-by-step and&nbsp;inspect variable values.</p>

<p><img src="http://i.imgur.com/BSzqQQA.png" alt="Imgur"></p>

<h2 id="how-to-connect-to-a-running-nodejs-process">How to Connect to a Running Node.js Process</h2>

<p>Firstly, you need to&nbsp;find the&nbsp;process id:</p>

<pre><code>$ ps aux | grep node
katspaugh       56880   0,0  0,0  2432784    604 s001  S+    2:47     0:00.00 grep node
katspaugh       56865   0,0  0,3  3049188  26828 s002  S+    2:46     0:00.35 node bin/www
</code></pre>

<p>The id is in&nbsp;the&nbsp;second column.</p>

<p>Next, send the&nbsp;process a&nbsp;special signal that tells Node.js to&nbsp;start listening for&nbsp;debug RPC:</p>

<pre><code>$ kill -s USR1 56865
</code></pre>

<p>You’ll see Node.js reporting back:</p>

<pre><code>Hit SIGUSR1 - starting debugger agent.
debugger listening on port 5858
</code></pre>

<p>Finally, install and&nbsp;launch Node Inspector and&nbsp;view the&nbsp;URL it gives you in&nbsp;Chrome or Safari:</p>

<pre><code>$ npm install -g node-inspector
$ node-inspector
Node Inspector v0.7.3
Visit http://127.0.0.1:8080/debug?port=5858 to start debugging.
</code></pre>

<p>That’s it! Now you can just copy &amp; paste all your application files, loaded into&nbsp;the&nbsp;Node.js process, from&nbsp;the&nbsp;DevTools resources panel.</p>

</div>
          </section>
        </div>
      </div>
    </div>

    <footer>
      <div class="col-xs-12">
        <a rel="license" href="https://creativecommons.org/licenses/by/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/80x15.png" /></a>
      </div>

      <div class="col-xs-12">
        <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">wavesurfer.js</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/katspaugh/wavesurfer.js" property="cc:attributionName" rel="cc:attributionURL">katspaugh</a> is licensed under a&nbsp;<a style="white-space: nowrap" rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.
      </div>

      <div class="col-xs-12 privacy">
        <h5>Privacy Policy</h5>

        <p>This site uses Google Analytics to collect anonymous data on how the site is used.</p>

        <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
        <script type="text/javascript">
            window.cookieconsent_options = {"message":"This website uses cookies to ensure you get the best experience on our website","dismiss":"Got it!","learnMore":"More info","link":null,"theme":"dark-bottom"};
        </script>

        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
        <!-- End Cookie Consent plugin -->

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-50026819-1', 'auto');
            ga('send', 'pageview');
        </script>
      </div>
    </footer>
  </body>
</html>
